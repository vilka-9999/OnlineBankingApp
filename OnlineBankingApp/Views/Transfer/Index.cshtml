@{
    ViewData["Title"] = "Transfer Funds";
    var user = ViewBag.User as OnlineBankingApp.Models.User;
    var accounts = ViewBag.Accounts as List<OnlineBankingApp.Models.Account>;
}

<h2>Transfer Funds</h2>

<!-- Display success message -->
@if (ViewBag.SuccessMessage != null)
{
        <div class="alert alert-success" role="alert">
        @ViewBag.SuccessMessage
        </div>
}

<!-- Display validation errors -->
@if (!ViewData.ModelState.IsValid)
{
        <div class="alert alert-danger" role="alert">
        @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
        {
                    <p>@error.ErrorMessage</p>
        }
        </div>
}

<form asp-action="Index" method="post">
    <!-- Dropdown for sender accounts -->
    <div class="form-group">
        <label for="senderAccountId">Select Your Account</label>
        <select class="form-control" id="senderAccountId" name="senderAccountId">
            @if (accounts != null)
            {
                foreach (var account in accounts)
                {
                            <option value="@account.AccountId">
                        @account.AccountNumber - @account.Bank (Balance: $@account.AccountBalance)
                            </option>
                }
            }
        </select>
    </div>

    <!-- Receiver account number -->
    <div class="form-group">
        <label for="receiverAccountNumber">Receiver Account Number</label>
        <input type="number" class="form-control" id="receiverAccountNumber" name="receiverAccountNumber" required />
    </div>

    <!-- Transfer amount -->
    <div class="form-group">
        <label for="transferAmount">Amount to Transfer</label>
        <input type="number" step="0.01" class="form-control" id="transferAmount" name="transferAmount" required />
    </div>

    <!-- Submit button -->
    <button type="submit" class="btn btn-primary">Transfer</button>
</form>
